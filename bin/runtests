#!/usr/bin/env bash

if [ $# -ge 1 -a "$1" = "release" ]; then
    testExec=bin/tests-release
    shift
elif [ $# -ge 1 -a "$1" = "debug" ]; then
    testExec=bin/tests-debug
    shift
else
    testExec=`ls -1t bin/tests-* 2> /dev/null | sed '2,$d'`
fi

if [ -z "$testExec" ]; then
    echo "Executable for running unit tests not found"
    exit 1
elif ! [ -x $testExec ]; then
    echo "Executable $testExec not found"
    exit 1
fi

$testExec -c $@
